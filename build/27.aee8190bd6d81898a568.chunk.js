(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{d038e70bab344e2c8e4f:function(e,t,r){"use strict";r.r(t);var n=r("8af190b70a6bc55c6f1b"),o=r.n(n),a=r("a28fc3c963a1d4d1a2e5"),i=r("da310028ba2a28510514"),c=r("f474c75d9da68c034eae"),u=r("7f6f1d74f1e2335921b8"),s=r("bf479727ef34adb276a5"),l=r("6b20a4038fb2adfb033d"),f=r("d7dd51e1bf6bfc2c9c3d"),p=r("46160e2b7f8d44428214"),d=r("5ab8365ac36c5dd588cb"),h=r("6c68d13fe9e3e77d8fc4"),b=r("3ad3c1378076e862aab0"),m="APP/AdminProfile/MultiFactorAuth/VERIFY_MULTI_FACTOR_AUTH_REQUEST",v="APP/AdminProfile/MultiFactorAuth/VERIFY_MULTI_FACTOR_AUTH_SUCCESS",y="APP/AdminProfile/MultiFactorAuth/VERIFY_MULTI_FACTOR_AUTH_FAILURE",g="APP/AdminProfile/MultiFactorAuth/GET_MULTI_FACTOR_AUTH_REQUEST",O="APP/AdminProfile/MultiFactorAuth/GET_MULTI_FACTOR_AUTH_SUCCESS",_="APP/AdminProfile/MultiFactorAuth/GET_MULTI_FACTOR_AUTH_FAILURE",A="APP/AdminProfile/MultiFactorAuth/DISABLE_MULTI_FACTOR_AUTH_REQUEST",E="APP/AdminProfile/MultiFactorAuth/DISABLE_MULTI_FACTOR_AUTH_SUCCESS",j="APP/AdminProfile/MultiFactorAuth/DISABLE_MULTI_FACTOR_AUTH_FAILURE",P="APP/AdminProfile/MultiFactorAuth/GET_RECOVERY_CODES_REQUEST",w="APP/AdminProfile/MultiFactorAuth/GET_RECOVERY_CODES_SUCCESS",S="APP/AdminProfile/MultiFactorAuth/GET_RECOVERY_CODES_FAILURE",R="APP/AdminProfile/MultiFactorAuth/SEND_EMAIL_WITH_MFA_RECOVERY_REQUEST",F="APP/AdminProfile/MultiFactorAuth/GENERATE_RECOVERY_CODE_REQUEST",C="APP/AdminProfile/MultiFactorAuth/GENERATE_RECOVERY_CODE_SUCCESS",L="APP/AdminProfile/MultiFactorAuth/GENERATE_RECOVERY_CODE_FAILURE",x="APP/AdminProfile/BasicInfo/LOAD_BASIC_INFO_REQUEST",T="APP/AdminProfile/BasicInfo/LOAD_BASIC_INFO_SUCCESS",I="APP/AdminProfile/BasicInfo/LOAD_BASIC_INFO_FAILURE",k="APP/AdminProfile/MultiFactorAuth/ENABLE_2FA_AUTH_REQUEST",M="APP/AdminProfile/MultiFactorAuth/ENABLE_2FA_AUTH_SUCCESS",U="APP/AdminProfile/MultiFactorAuth/ENABLE_2FA_AUTH_FAILURE",N=r("371a6f90cf4b090759be"),D=Object(N.a)(x,"userEmail"),q=Object(N.a)(T,"response"),G=Object(N.a)(I,"error");var H=Object(N.a)(v,"response"),B=Object(N.a)(y,"error"),Y=Object(N.a)(P),V=Object(N.a)(w,"response"),J=Object(N.a)(S,"error"),Q=Object(N.a)(F,"userId"),W=Object(N.a)(C,"response"),$=Object(N.a)(L,"error"),z=Object(N.a)(R,"userId"),K=Object(N.a)("APP/AdminProfile/MultiFactorAuth/SEND_EMAIL_WITH_MFA_RECOVERY_SUCCESS","response"),X=Object(N.a)("APP/AdminProfile/MultiFactorAuth/SEND_EMAIL_WITH_MFA_RECOVERY_FAILURE","error"),Z=Object(N.a)(g),ee=Object(N.a)(O,"response"),te=Object(N.a)(_,"error"),re=Object(N.a)(A,"payload"),ne=Object(N.a)(E,"response"),oe=Object(N.a)(j,"error"),ae=Object(N.a)(k,"payload"),ie=Object(N.a)(M,"successResponse"),ce=Object(N.a)(U,"error"),ue=r("384d9479bdc5794993e1"),se=r("8636a5b0e6ac43ae8b4d"),le=r("6542cd13fd5dd1bcffd4"),fe=r("278a8afb137fef007e00");function pe(e){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function de(){de=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,o){var a=t&&t.prototype instanceof p?t:p,i=Object.create(a.prototype),c=new P(o||[]);return n(i,"_invoke",{value:_(e,r,c)}),i}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var f={};function p(){}function d(){}function h(){}var b={};u(b,a,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(w([])));v&&v!==t&&r.call(v,a)&&(b=v);var y=h.prototype=p.prototype=Object.create(b);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){var o;n(this,"_invoke",{value:function(n,a){function i(){return new t((function(o,i){!function n(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==pe(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(u.arg)}(n,a,o,i)}))}return o=o?o.then(i,i):i()}})}function _(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return S()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=A(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function A(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,A(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function w(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=h,n(y,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:d,configurable:!0}),d.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(O.prototype),u(O.prototype,i,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new O(s(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(y),u(y,c,"Generator"),u(y,a,(function(){return this})),u(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=w,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:w(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}var he=de().mark(Fe),be=de().mark(Ce),me=de().mark(Le),ve=de().mark(xe),ye=de().mark(Te),ge=de().mark(Ie),Oe=de().mark(ke),_e=de().mark(Me),Ae=de().mark(Ue),Ee=de().mark(Ne),je=de().mark(De),Pe=de().mark(qe);function we(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?we(Object(r),!0).forEach((function(t){Re(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):we(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Re(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==pe(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==pe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===pe(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fe(){var e,t;return de().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(h.g)(v);case 2:return r.next=4,Object(h.f)(Object(le.d)());case 4:return e=r.sent,t=Se(Se({},t=e.toJS()),{},{multi_factor_auth_enable:!0}),r.next=9,Object(h.e)(Object(ue.o)(t));case 9:case"end":return r.stop()}}),he)}function Ce(){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),be)}function Le(){var e,t;return de().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(h.g)(E);case 2:return r.next=4,Object(h.f)(Object(le.d)());case 4:return e=r.sent,t=Se(Se({},t=e.toJS()),{},{multi_factor_auth_enable:!1}),r.next=9,Object(h.e)(Object(ue.o)(t));case 9:case"end":return r.stop()}}),me)}function xe(e){var t,r,n,o;return de().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=Object(fe.a)(),r=e.payload.totp_token,n=e.email,a.next=4,Object(h.d)(Fe);case 4:return o=a.sent,a.next=7,Object(h.d)(se.a.post("verify_otp/",H,B,{email:n,otp:r},t));case 7:return a.next=9,Object(h.g)([b.LOCATION_CHANGE,y]);case 9:return a.next=11,Object(h.c)(o);case 11:case"end":return a.stop()}}),ve)}function Te(){var e,t;return de().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e=Object(fe.a)(),r.next=3,Object(h.d)(Ce);case 3:return t=r.sent,r.next=6,Object(h.d)(se.a.get("multi-factor-auth/totp-setup",ee,te,e));case 6:return r.next=8,Object(h.g)([b.LOCATION_CHANGE,_]);case 8:return r.next=10,Object(h.c)(t);case 10:case"end":return r.stop()}}),ye)}function Ie(e){var t,r,n,o,a;return de().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=Object(fe.a)(),r=e.payload,n=r.userEmail,o=r.totp_token,i.next=4,Object(h.d)(Le);case 4:return a=i.sent,i.next=7,Object(h.d)(se.a.post("disable_2fa/",ne,oe,{email:n,otp:o},t));case 7:return i.next=9,Object(h.g)([b.LOCATION_CHANGE,j]);case 9:return i.next=11,Object(h.c)(a);case 11:case"end":return i.stop()}}),ge)}function ke(){var e;return de().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Object(fe.a)(),t.next=3,Object(h.d)(se.a.get("multi-factor-auth/recovery-code/get",V,J,e));case 3:case"end":return t.stop()}}),Oe)}function Me(e){var t;return de().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=Object(fe.a)(),r.next=3,Object(h.b)(se.a.get("multi-factor-auth/recovery-code/send/".concat(e.userId),K,X,t));case 3:case"end":return r.stop()}}),_e)}function Ue(e){var t;return de().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=Object(fe.a)(),r.next=3,Object(h.b)(se.a.put("multi-factor-auth/generate/recovery-code/".concat(e.userId),W,$,{_id:e.userId},t));case 3:case"end":return r.stop()}}),Ae)}function Ne(e){var t,r;return de().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=Object(fe.a)(),r=e.userEmail,n.next=4,Object(h.b)(se.a.post("get_general_info/",q,G,{email:r,is_admin:!0},t));case 4:case"end":return n.stop()}}),Ee)}function De(e){var t;return de().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=Object(fe.a)(),r.next=3,Object(h.d)(se.a.post("enable_2fa/",ie,ce,e.payload,t));case 3:return r.next=5,Object(h.g)([b.LOCATION_CHANGE,U]);case 5:case"end":return r.stop()}}),je)}function qe(){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.h)(k,De);case 2:return e.next=4,Object(h.h)(g,Te);case 4:return e.next=6,Object(h.h)(m,xe);case 6:return e.next=8,Object(h.h)(A,Ie);case 8:return e.next=10,Object(h.h)(P,ke);case 10:return e.next=12,Object(h.h)(R,Me);case 12:return e.next=14,Object(h.h)(F,Ue);case 14:return e.next=16,Object(h.h)(x,Ne);case 16:case"end":return e.stop()}}),Pe)}var Ge=r("54f683fcda7806277002"),He=r("62cade0222f879de1092");function Be(e){return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ve(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(r),!0).forEach((function(t){Je(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ye(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Je(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Be(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Be(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Be(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Qe=Object(Ge.fromJS)({requesting:!1,isLoading:!1,response:null,error:null,qrPath:"",recoveryCodes:[],recovery_code_generated_on:"",message:"",secret:"",user:{}});var We,$e,ze,Ke,Xe,Ze,et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:case g:case A:case m:case P:case R:case F:return e.merge({requesting:!0,response:null,error:null,message:"",isLoading:!0});case x:return e.merge({basicInfoRequesting:!0,response:null,error:null,message:"",isLoading:!0});case T:return e.merge({isLoading:!1,basicInfoRequesting:!1,error:null,response:null,success:!0,user:t.response.data&&t.response.data.userInfo&&Object(Ge.fromJS)(t.response.data.userInfo)});case I:return console.log("Error Response",t.error),e.merge({isLoading:!1,basicInfoRequesting:!1,error:t.error.message,response:null,success:!1});case U:case _:case j:case y:case S:case"APP/AdminProfile/MultiFactorAuth/SEND_EMAIL_WITH_MFA_RECOVERY_FAILURE":case L:return e.merge({response:null,error:t.error.message,isLoading:!1});case O:return e.merge({isLoading:!1,error:null,response:null,qrPath:t.response.data.qrcode.path,secret:t.response.data.secret});case w:return e.merge({isLoading:!1,recoveryCodes:t.response.data.recovery_codes,recovery_code_generated_on:t.response.data.generated_on});case C:return e.merge({isLoading:!1,recoveryCodes:t.response.data.backup_recovery_codes,response:t.response.message,recovery_code_generated_on:t.response.data.generated_on});case"APP/AdminProfile/MultiFactorAuth/SEND_EMAIL_WITH_MFA_RECOVERY_SUCCESS":return e.merge({isLoading:!1,response:t.response.message});case E:return e.merge({isLoading:!1,error:null,response:t.response.message}).updateIn(["user"],(function(e){var t=e.toJS();return Object(Ge.fromJS)(Ve(Ve({},t),{},{multi_factor_auth_enable:!1}))}));case v:return e.merge({isLoading:!1,error:null,response:t.response.message}).updateIn(["user"],(function(e){var t=e.toJS();return Object(Ge.fromJS)(Ve(Ve({},t),{},{multi_factor_auth_enable:!0}))}));case M:return e.merge({isLoading:!1,error:null,response:null,qrPath:t.successResponse.data.otp_url});case He.t:return Qe;default:return e}},tt=r("adc20f99e57c573c589c"),rt=r("d95b0cf107403b178365"),nt=r("ab4cb61bcb2dc161defb"),ot=r("9683455beae561750395"),at=r("d559af73313ecb218818"),it=r.n(at),ct=r("c34c7d5c307e1dafdb1e"),ut=r.n(ct),st=function(e){return e.get("adminProfileMultiFactorAuth")},lt=r("df4d709115ae1aca60ef"),ft=r("7286e4d32da69e8d8af9");function pt(e,t,r,n){Ze||(Ze="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),1===a)t.children=n;else if(a>1){for(var i=new Array(a),c=0;c<a;c++)i[c]=arguments[c+3];t.children=i}if(t&&o)for(var u in o)void 0===t[u]&&(t[u]=o[u]);else t||(t=o||{});return{$$typeof:Ze,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function dt(e){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ht(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function bt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(r),!0).forEach((function(t){Et(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ht(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function mt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,jt(n.key),n)}}function yt(e,t){return(yt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function gt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=At(e);if(t){var o=At(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ot(this,r)}}function Ot(e,t){if(t&&("object"===dt(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _t(e)}function _t(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function At(e){return(At=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Et(e,t,r){return(t=jt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jt(e){var t=function(e,t){if("object"!==dt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==dt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===dt(t)?t:String(t)}var Pt=Object(a.b)({user:Object(a.a)(st,(function(e){return e.get("user")})),confirmUpdateMultiFactorAuth:Object(a.a)(st,(function(e){return e})),successResponse:Object(a.a)(st,(function(e){return e.get("response")})),errorResponse:Object(a.a)(st,(function(e){return e.get("error")})),isRequesting:Object(a.a)(st,(function(e){return e.get("isLoading")})),recoveryCodes:Object(a.a)(st,(function(e){return e.get("recoveryCodes")})),message:Object(a.a)(st,(function(e){return e.get("message")})),enable2FAResponse:Object(a.a)(st,(function(e){return e.get("qrPath")})),recovery_code_generated_on:Object(a.a)(st,(function(e){return e.get("recovery_code_generated_on")})),basicInfoRequesting:Object(a.a)(st,(function(e){return e.get("basicInfoRequesting")}))}),wt=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yt(e,t)}(a,e);var t,r,n,o=gt(a);function a(){var e;mt(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Et(_t(e=o.call.apply(o,[this].concat(r))),"state",{data:{totp_token:""},multiFactorAuth:e.props.user&&e.props.user.get("multi_factor_auth_enable"),showMultiFactorAuthDisable:!1,errors:{},recoveryCodes:[],message:{},user:{},userEmail:""}),Et(_t(e),"handleCheckBox",(function(){e.setState({multiFactorAuth:!e.state.multiFactorAuth},(function(){if(this.state.multiFactorAuth){var e=this.state.userEmail;this.props.enable2faAuthRequest({email:e,reenable:!1})}}))})),Et(_t(e),"handleSubmit",(function(t){t.preventDefault();var r=e.state,n=r.data,o=r.userEmail,a=e.props.confirmUpdateMultiFactorAuth.get("secret"),i=e.validate();e.setState({errors:i}),0===Object.keys(i).length&&(e.props.verifyMultiFactorAuthRequest(Object.assign({},{data:n,userEmail:o,secret:a})),e.setState({isLoading:!0,data:{totp_token:"",userEmail:o},errors:{}}))})),Et(_t(e),"validate",(function(){var t={};return e.state.data.totp_token||(t.totp_token="Can't be blank"),t})),Et(_t(e),"handleChange",(function(t){var r=e.state.errors;r[t.target.name]&&t.target.value&&delete r[t.target.name],e.setState({data:bt(bt({},e.state.data),{},Et({},t.target.name,t.target.value)),errors:r})})),Et(_t(e),"changeMultiFactorAuthStatus",(function(){e.setState({showMultiFactorAuthDisable:!e.state.showMultiFactorAuthDisable})})),Et(_t(e),"disableMultiFactorAuthRequest",(function(){var t=e.state,r=t.userEmail,n=t.data.totp_token;e.props.disableMultiFactorAuthRequest({userEmail:r,totp_token:n})})),Et(_t(e),"generateRecoveryCodeRequest",(function(){e.props.generateRecoveryCodeRequest(e.props.user.get("_id"))})),Et(_t(e),"sendMultiFactorRecoveryCodesEmailRequest",(function(){e.props.sendMultiFactorRecoveryCodesEmailRequest(e.props.user.get("_id"))})),e}return t=a,(r=[{key:"componentDidMount",value:function(){var e=this;Object(p.a)()._id&&this.props.getRecoveryCodesRequest();var t=Object(fe.a)();if(t)try{var r=it()(t);if("object"===dt(r)&&r.hasOwnProperty("user_id")){var n=r.email;this.setState({userEmail:n||""},(function(){e.props.loadBasicInfoRequest(e.state.userEmail)}))}}catch(e){throw e}}},{key:"componentDidUpdate",value:function(e){if(this.props.errorResponse&&e.errorResponse!==this.props.errorResponse&&ft.toast.error(this.props.errorResponse?this.props.errorResponse:"error"),this.props.user&&this.props.user.get("multi_factor_auth_enable")!==e.user.get("multi_factor_auth_enable")&&this.setState({multiFactorAuth:this.props.user.get("multi_factor_auth_enable"),showMultiFactorAuthDisable:!1}),this.props.user&&e.user!==this.props.user){var t=e.user.toJS();this.setState({user:t,multiFactorAuth:this.props.user&&this.props.user.get("multi_factor_auth_enable")})}}},{key:"render",value:function(){var e=this.state,t=e.multiFactorAuth,r=e.showMultiFactorAuthDisable,n=e.data,o=e.errors,a=this.props,f=a.successResponse,p=a.errorResponse,h=a.isRequesting,b=a.basicInfoRequesting;return a.recoveryCodes,a.user,f&&"string"===typeof f&&lt.a,p&&"string"===typeof p&&lt.a,pt("div",{},void 0,pt("div",{className:"section"},void 0,b?We||(We=pt("div",{className:"loader_wallet"})):pt("div",{className:"segment"},void 0,this.props.user&&this.props.user.get("multi_factor_auth_enable")&&pt("div",{},void 0,!r&&pt("div",{},void 0,pt("div",{className:"field mg-btm-sm"},void 0,pt("label",{className:"custom-control custom-checkbox"},void 0,pt("input",{name:"multiFactorAuth",className:"custom-control-input",type:"checkbox",checked:this.props.user.get("multi_factor_auth_enable")||!1,disabled:!0}),$e||($e=pt("span",{className:"custom-control-indicator"}))," ",ze||(ze=pt("span",{className:"custom-control-description"},void 0,"Two Factor Auth Enabled"))," ")),pt(i.a,{negative:!0,onClick:this.changeMultiFactorAuthStatus},void 0,"Disable Two Factor Auth")),r&&pt("div",{},void 0,Ke||(Ke=pt("p",{},void 0,"Do you want to disable two factor auth?")),pt(ot.a,{className:"totp__input",type:"text",name:"totp_token",placeholder:"Token...",value:n.totp_token||"",onChange:this.handleChange,error:o.totp_token}),pt(i.a,{className:"button positive",onClick:this.disableMultiFactorAuthRequest,loading:h,disabled:h},void 0,"Yes, Disable"),pt(i.a,{className:"button basic",onClick:this.changeMultiFactorAuthStatus},void 0,"Cancel"))),this.props.user&&!this.props.user.get("multi_factor_auth_enable")&&pt("div",{className:"field"},void 0,pt(c.a,{label:"Enable Two Factor Auth",name:"multiFactorAuth",onClick:this.handleCheckBox,checked:t,toggle:!0}),pt(u.a,{trigger:pt(s.a,{style:{marginLeft:"8px"},name:"info",color:"yellow",circular:!0}),content:"Add additional security to your account using two factor authentication. When two factor authentication is enabled, each time you login, you will be prompted for a secure random token. You may retrieve this token from your phone's Google Authenticator application or any other authenticator app.",position:"top right"}),t&&pt("div",{className:"mg-top-sm"},void 0,Xe||(Xe=pt("div",{className:"message info"},void 0,"Scan the following QR code with any authenticator App.",pt("a",{className:"mg-right-sm",target:"_blank",href:"https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2"},void 0,pt("img",{src:""})),pt("a",{target:"_blank",href:"https://itunes.apple.com/us/app/google-authenticator/id388497605"},void 0,pt("img",{src:""})))),this.props.enable2FAResponse&&pt(ut.a,{value:this.props.enable2FAResponse}),pt("div",{},void 0,pt(l.a,{onSubmit:this.handleSubmit},void 0,pt(d.a,{type:"text",name:"totp_token",value:n.totp_token,onChange:this.handleChange,placeholder:"Enter the token from authenticator app",error:o.totp_token&&o.totp_token}),pt(i.a,{color:"purple",type:"submit",loading:h,disabled:h},void 0,"Verify"))))))))}}])&&vt(t.prototype,r),n&&vt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.a.Component),St=Object(rt.a)({key:"adminProfileMultiFactorAuth",reducer:et}),Rt=Object(tt.a)({key:"adminProfileMultiFactorAuth",saga:qe}),Ft=Object(f.connect)(Pt,(function(e){return{getMultiFactorAuthRequest:function(){return e(Z())},getRecoveryCodesRequest:function(){return e(Y())},generateRecoveryCodeRequest:function(t){return e(Q(t))},sendMultiFactorRecoveryCodesEmailRequest:function(t){return e(z(t))},verifyMultiFactorAuthRequest:function(t){return e({type:m,payload:(r=t).data,email:r.userEmail,secret:r.secret});var r},disableMultiFactorAuthRequest:function(t){return e(re(t))},loadBasicInfoRequest:function(t){return e(D(t))},enable2faAuthRequest:function(t){return e(ae(t))}}}));t.default=Object(nt.compose)(St,Rt,Ft)(wt)}}]);